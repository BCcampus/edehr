<template lang="pug">
  div(class="ehr-page")
    div(v-if="isV2")
      ehr-page(:pageDataKey="pageDataKey")
    div(v-else)
      ehr-page-v1(:pageDataKey="pageDataKey")
    div(style="display:none")
      p This {title} page is generated.
      p Label: {label}
      p Data Key: {pageDataKey}
      p Component name: {componentName}
      p Redirect: {redirect}
      p Route name: {routeName}
      p Full path: {path}
</template>

<script>
import EhrPageV1 from '../components/EhrPageV1'
import EhrPage from '../components/page/EhrPage'
import { getPageDefinition } from '../../helpers/ehr-defs'

export default {
  name: '{componentName}',
  components: { EhrPage, EhrPageV1 },
  data: function() {
    return {
      pageDataKey: '{pageDataKey}'
    }
  },
  computed: {
    uiProps() {
    console.log('get ui props for ', this.pageDataKey )
      return getPageDefinition(this.pageDataKey)
    },
    isV2 () {
      return this.uiProps.isV2
    }
  }
}
</script>

<style lang="scss" scoped></style>
